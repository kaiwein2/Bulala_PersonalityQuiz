import 'package:flutter/material.dart';

void main() {
  runApp(PersonalityQuizApp());
}

class PersonalityQuizApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Personality Quiz',
      theme: ThemeData(
        primarySwatch: Colors.pink,
        scaffoldBackgroundColor: Color(0xFF9B7FDB),
        fontFamily: 'Arial',
      ),
      home: StartPage(),
      debugShowCheckedModeBanner: false,
    );
  }
}

class StartPage extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      backgroundColor: Color(0xFF9B7FDB),
      body: SafeArea(
        child: Center(
          child: Padding(
            padding: EdgeInsets.symmetric(horizontal: 30, vertical: 40),
            child: Column(
              mainAxisAlignment: MainAxisAlignment.center,
              children: [
                Spacer(),
                // Decorative question marks
                Row(
                  mainAxisAlignment: MainAxisAlignment.center,
                  children: [
                    _buildQuestionMark(60, Color(0xFFFFB3C1), -15),
                    SizedBox(width: 20),
                    _buildQuestionMark(120, Color(0xFFFFAA7F), 0),
                    SizedBox(width: 20),
                    _buildQuestionMark(60, Color(0xFFD4B3FF), 15),
                  ],
                ),
                SizedBox(height: 60),
                // Main card
                Container(
                  padding: EdgeInsets.all(35),
                  decoration: BoxDecoration(
                    color: Colors.white,
                    borderRadius: BorderRadius.circular(30),
                    boxShadow: [
                      BoxShadow(
                        color: Color(0x1A000000),
                        spreadRadius: 0,
                        blurRadius: 20,
                        offset: Offset(0, 10),
                      ),
                    ],
                  ),
                  child: Column(
                    children: [
                      Text(
                        'Personality Quiz\nAwaits You',
                        textAlign: TextAlign.center,
                        style: TextStyle(
                          fontSize: 32,
                          fontWeight: FontWeight.w900,
                          color: Color(0xFF2D1B69),
                          height: 1.2,
                        ),
                      ),
                      SizedBox(height: 20),
                      Text(
                        'Discover your spirit animal\nand personality type',
                        textAlign: TextAlign.center,
                        style: TextStyle(
                          fontSize: 16,
                          color: Color(0xFF9B7FDB),
                          height: 1.5,
                        ),
                      ),
                      SizedBox(height: 30),
                      // Carousel dots
                      Row(
                        mainAxisAlignment: MainAxisAlignment.center,
                        children: [
                          _buildDot(false),
                          SizedBox(width: 8),
                          _buildDot(true),
                          SizedBox(width: 8),
                          _buildDot(false),
                        ],
                      ),
                    ],
                  ),
                ),
                SizedBox(height: 40),
                // Start button
                GestureDetector(
                  onTap: () {
                    Navigator.push(
                      context,
                      MaterialPageRoute(builder: (context) => QuizPage()),
                    );
                  },
                  child: Container(
                    width: 80,
                    height: 80,
                    decoration: BoxDecoration(
                      color: Color(0xFFFFAA7F),
                      shape: BoxShape.circle,
                      boxShadow: [
                        BoxShadow(
                          color: Color(0xFFFFAA7F),
                          spreadRadius: 0,
                          blurRadius: 20,
                          offset: Offset(0, 8),
                        ),
                      ],
                    ),
                    child: Icon(
                      Icons.arrow_forward_rounded,
                      color: Colors.white,
                      size: 35,
                    ),
                  ),
                ),
                Spacer(),
              ],
            ),
          ),
        ),
      ),
    );
  }

  Widget _buildQuestionMark(double size, Color color, double rotation) {
    return Transform.rotate(
      angle: rotation * 3.14159 / 180,
      child: Container(
        width: size,
        height: size,
        decoration: BoxDecoration(
          color: color,
          borderRadius: BorderRadius.circular(size / 4),
          boxShadow: [
            BoxShadow(
              color: color,
              spreadRadius: 0,
              blurRadius: 15,
              offset: Offset(0, 5),
            ),
          ],
        ),
        child: Center(
          child: Text(
            '?',
            style: TextStyle(
              fontSize: size * 0.6,
              fontWeight: FontWeight.bold,
              color: Colors.white,
            ),
          ),
        ),
      ),
    );
  }

  Widget _buildDot(bool isActive) {
    return Container(
      width: isActive ? 30 : 10,
      height: 10,
      decoration: BoxDecoration(
        color: isActive ? Color(0xFFFFAA7F) : Color(0xFFE0E0E0),
        borderRadius: BorderRadius.circular(5),
      ),
    );
  }
}

class QuizPage extends StatefulWidget {
  final bool isBrutal;
  
  QuizPage({this.isBrutal = false});
  
  @override
  _QuizPageState createState() => _QuizPageState();
}

class _QuizPageState extends State<QuizPage> {
  int currentQuestion = 0;
  Map<int, String> answers = {};

  final List<Map<String, dynamic>> wholesomeQuestions = [
    {
      'question': 'How do you spend your ideal weekend?',
      'options': ['Reading or relaxing at home', 'Going out with friends', 'Trying something adventurous', 'Working on a creative project']
    },
    {
      'question': 'What describes you best in social situations?',
      'options': ['Quiet observer', 'Life of the party', 'Confident leader', 'Thoughtful listener']
    },
    {
      'question': 'How do you handle stress?',
      'options': ['Need alone time to recharge', 'Talk it out with friends', 'Face it head-on', 'Express through art or writing']
    },
    {
      'question': 'What\'s your approach to making decisions?',
      'options': ['Think carefully and analyze', 'Ask for others\' opinions', 'Trust your gut instantly', 'Consider all creative possibilities']
    },
    {
      'question': 'Which environment makes you happiest?',
      'options': ['Cozy and quiet spaces', 'Busy cafes or social venues', 'Outdoors and nature', 'Art studios or creative spaces']
    },
    {
      'question': 'How do you prefer to communicate?',
      'options': ['Through text or writing', 'Face-to-face conversations', 'Direct and straightforward', 'Through creative expression']
    },
    {
      'question': 'What\'s your biggest strength?',
      'options': ['Deep thinking and wisdom', 'Making people feel welcome', 'Getting things done', 'Unique perspective and ideas']
    },
    {
      'question': 'How do you recharge your energy?',
      'options': ['Solitude and peace', 'Being around loved ones', 'Physical activity', 'Creative hobbies']
    },
    {
      'question': 'What motivates you most?',
      'options': ['Knowledge and understanding', 'Connection and belonging', 'Achievement and success', 'Self-expression and beauty']
    },
    {
      'question': 'How do you approach new challenges?',
      'options': ['Research thoroughly first', 'Seek support from others', 'Dive right in', 'Find an innovative solution']
    },
    {
      'question': 'What role do you usually take in a group?',
      'options': ['The advisor', 'The connector', 'The organizer', 'The innovator']
    },
    {
      'question': 'What brings you the most joy?',
      'options': ['Learning something new', 'Making others happy', 'Accomplishing goals', 'Creating something beautiful']
    },
  ];

  final List<Map<String, dynamic>> brutalQuestions = [
    {
      'question': 'How often do you check your phone during conversations?',
      'options': ['Never, I\'m respectful', 'Sometimes when bored', 'Constantly, who cares?', 'Only for emergencies']
    },
    {
      'question': 'When someone shares good news, your first thought is:',
      'options': ['Happy for them!', 'How does this affect me?', 'I could do better', 'Genuinely excited']
    },
    {
      'question': 'You\'re in a group project. You usually:',
      'options': ['Do my fair share', 'Take charge of everything', 'Do the minimum', 'Help everyone succeed']
    },
    {
      'question': 'How do you handle being wrong?',
      'options': ['Admit it and learn', 'Never happen, I\'m always right', 'Blame others', 'Accept gracefully']
    },
    {
      'question': 'Someone criticizes your work. You:',
      'options': ['Consider their feedback', 'Get defensive immediately', 'Plot revenge', 'Thank them sincerely']
    },
    {
      'question': 'When making plans with friends:',
      'options': ['I\'m flexible', 'It\'s my way or nothing', 'I flake constantly', 'Consider everyone\'s preferences']
    },
    {
      'question': 'How many times do you talk about yourself in conversations?',
      'options': ['Normal amount', 'Every chance I get', 'Rarely', 'Balanced with listening']
    },
    {
      'question': 'Your friend is going through a tough time. You:',
      'options': ['Listen and support', 'Make it about me', 'Ghost them', 'Drop everything to help']
    },
    {
      'question': 'How do you react when someone else succeeds?',
      'options': ['Genuinely happy', 'Secretly jealous', 'Who cares?', 'Celebrate with them']
    },
    {
      'question': 'You made a mistake that hurt someone. You:',
      'options': ['Apologize sincerely', 'Justify my actions', 'Ignore it', 'Make it right']
    },
    {
      'question': 'In arguments, you typically:',
      'options': ['Try to understand both sides', 'Must win at all costs', 'Shut down', 'Seek compromise']
    },
    {
      'question': 'How often do you actually listen vs waiting to talk?',
      'options': ['I listen actively', 'Waiting to talk, always', 'Zone out completely', 'Genuinely engaged']
    },
  ];

  List<Map<String, dynamic>> get questions => widget.isBrutal ? brutalQuestions : wholesomeQuestions;

  void selectAnswer(int index) {
    if (currentQuestion >= questions.length) return;
    
    setState(() {
      answers[currentQuestion] = questions[currentQuestion]['options'][index];
    });
    
    Future.delayed(Duration(milliseconds: 300), () {
      if (!mounted) return;
      
      if (currentQuestion < questions.length - 1) {
        setState(() {
          currentQuestion++;
        });
      } else {
        Navigator.pushReplacement(
          context,
          MaterialPageRoute(
            builder: (context) => ResultPage(answers: answers),
          ),
        );
      }
    });
  }

  void goBack() {
    if (currentQuestion > 0) {
      setState(() {
        currentQuestion--;
      });
    } else {
      Navigator.pop(context);
    }
  }

  @override
  Widget build(BuildContext context) {
    // Safety check to prevent index out of range
    if (currentQuestion >= questions.length) {
      return Scaffold(
        backgroundColor: Color(0xFF9B7FDB),
        body: Center(child: CircularProgressIndicator()),
      );
    }
    
  
    
    return Scaffold(
      backgroundColor: Color(0xFF9B7FDB),
      appBar: AppBar(
        backgroundColor: Colors.transparent,
        elevation: 0,
        leading: IconButton(
          icon: Icon(Icons.arrow_back_ios, color: Colors.white),
          onPressed: goBack,
        ),
        title: Text(
          'Question ${currentQuestion + 1}',
          style: TextStyle(color: Colors.white, fontSize: 18, fontWeight: FontWeight.w600),
        ),
        centerTitle: true,
        actions: [
          IconButton(
            icon: Icon(Icons.more_vert, color: Colors.white),
            onPressed: () {},
          ),
        ],
      ),
      body: Column(
        children: [
          // Progress bar
          Padding(
            padding: EdgeInsets.symmetric(horizontal: 20),
            child: ClipRRect(
              borderRadius: BorderRadius.circular(10),
              child: LinearProgressIndicator(
                value: (currentQuestion + 1) / questions.length,
                backgroundColor: Color(0xFF7B5FC7),
                valueColor: AlwaysStoppedAnimation<Color>(Color(0xFFFFAA7F)),
                minHeight: 8,
              ),
            ),
          ),
          SizedBox(height: 40),
          Expanded(
            child: Padding(
              padding: EdgeInsets.symmetric(horizontal: 20),
              child: Column(
                children: [
                  // Question card
                  Container(
                    width: double.infinity,
                    padding: EdgeInsets.all(30),
                    decoration: BoxDecoration(
                      color: Colors.white,
                      borderRadius: BorderRadius.circular(25),
                      boxShadow: [
                        BoxShadow(
                          color: Colors.black,
                          spreadRadius: 0,
                          blurRadius: 20,
                          offset: Offset(0, 10),
                        ),
                      ],
                    ),
                    child: Column(
                      children: [
                        Container(
                          padding: EdgeInsets.all(20),
                          decoration: BoxDecoration(
                            color: Color(0xFFFFAA7F),
                            borderRadius: BorderRadius.circular(15),
                          ),
                          child: Icon(
                            Icons.edit_outlined,
                            color: Color(0xFF5B3A9B),
                            size: 40,
                          ),
                        ),
                        SizedBox(height: 25),
                        Text(
                          questions[currentQuestion]['question'],
                          textAlign: TextAlign.center,
                          style: TextStyle(
                            fontSize: 20,
                            fontWeight: FontWeight.w800,
                            color: Color(0xFF2D1B69),
                            height: 1.3,
                          ),
                        ),
                      ],
                    ),
                  ),
                  SizedBox(height: 30),
                  // Options
                  Expanded(
                    child: ListView.builder(
                      itemCount: questions[currentQuestion]['options'].length,
                      itemBuilder: (context, index) {
                        bool isSelected = answers[currentQuestion] == questions[currentQuestion]['options'][index];
                        return Padding(
                          padding: EdgeInsets.only(bottom: 15),
                          child: GestureDetector(
                            onTap: () => selectAnswer(index),
                            child: Container(
                              padding: EdgeInsets.symmetric(vertical: 20, horizontal: 25),
                              decoration: BoxDecoration(
                                color: isSelected ? Color(0xFFFFAA7F) : Color(0xFF8B6FD9),
                                borderRadius: BorderRadius.circular(20),
                                border: Border.all(
                                  color: isSelected ? Color(0xFFFFAA7F) : Color(0xFF7B5FC7),
                                  width: 2,
                                ),
                                boxShadow: isSelected ? [
                                  BoxShadow(
                                    color: Color(0xFFFFAA7F),
                                    spreadRadius: 0,
                                    blurRadius: 15,
                                    offset: Offset(0, 5),
                                  ),
                                ] : [],
                              ),
                              child: Text(
                                questions[currentQuestion]['options'][index],
                                textAlign: TextAlign.center,
                                style: TextStyle(
                                  fontSize: 16,
                                  fontWeight: FontWeight.w600,
                                  color: Colors.white,
                                ),
                              ),
                            ),
                          ),
                        );
                      },
                    ),
                  ),
                ],
              ),
            ),
          ),
        ],
      ),
    );
  }
}

class ResultPage extends StatelessWidget {
  final Map<int, String> answers;
  final bool isBrutal;

  ResultPage({required this.answers, this.isBrutal = false});

  Map<String, dynamic> calculatePersonality() {
    if (isBrutal) {
      return calculateBrutalPersonality();
    }
    return calculateWholesomePersonality();
  }

  Map<String, dynamic> calculateBrutalPersonality() {
    int narcissistScore = 0;
    int pushoverScore = 0;
    int avoidantScore = 0;

    answers.forEach((key, value) {
      if (value.contains('my way') || value.contains('always right') || value.contains('Every chance') || 
          value.contains('about me') || value.contains('Must win') || value.contains('Waiting to talk')) {
        narcissistScore++;
      } else if (value.contains('minimum') || value.contains('flake') || value.contains('Ghost') || 
                 value.contains('Who cares') || value.contains('Ignore') || value.contains('Zone out')) {
        avoidantScore++;
      } else if (value.contains('Blame') || value.contains('revenge') || value.contains('jealous')) {
        pushoverScore++;
      }
    });

    String personality;
    String animal;
    String animalDescription;
    String emoji;

    if (narcissistScore >= 5) {
      personality = 'The Narcissist';
      animal = 'Peacock';
      emoji = 'ü¶ö';
      animalDescription = 'You love being the center of attention. Everything is about you, and you make sure everyone knows it. Your mirror is your best friend.';
    } else if (avoidantScore >= 5) {
      personality = 'The Ghost';
      animal = 'Sloth';
      emoji = 'ü¶•';
      animalDescription = 'You avoid responsibility like it\'s radioactive. Commitment? Never heard of it. You\'re here for a good time, not a long time... or any time, really.';
    } else if (pushoverScore >= 4) {
      personality = 'The Petty One';
      animal = 'Cat';
      emoji = 'üê±';
      animalDescription = 'You hold grudges like they\'re going out of style. Someone wrongs you? You\'ll remember it forever and probably plot elaborate (though harmless) revenge.';
    } else {
      personality = 'Actually Decent Human';
      animal = 'Golden Retriever';
      emoji = 'üêï';
      animalDescription = 'Congratulations! You\'re genuinely a good person. You listen, care about others, and take responsibility. Boring? Maybe. But at least people actually like you.';
    }

    return {
      'personality': personality,
      'animal': animal,
      'animalDescription': animalDescription,
      'emoji': emoji,
    };
  }

  Map<String, dynamic> calculateWholesomePersonality() {
    Map<String, int> counts = {'A': 0, 'B': 0, 'C': 0, 'D': 0};
    
    answers.forEach((key, value) {
      if (value.contains('relaxing') || value.contains('Quiet') || value.contains('alone') || 
          value.contains('analyze') || value.contains('Cozy') || value.contains('text') || 
          value.contains('thinking') || value.contains('Solitude') || value.contains('Knowledge') || 
          value.contains('Research') || value.contains('advisor') || value.contains('Learning')) {
        counts['A'] = (counts['A'] ?? 0) + 1;
      } else if (value.contains('friends') || value.contains('party') || value.contains('Talk') || 
                 value.contains('opinions') || value.contains('cafes') || value.contains('Face-to-face') || 
                 value.contains('welcome') || value.contains('loved ones') || value.contains('Connection') || 
                 value.contains('support') || value.contains('connector') || value.contains('others happy')) {
        counts['B'] = (counts['B'] ?? 0) + 1;
      } else if (value.contains('adventurous') || value.contains('leader') || value.contains('head-on') || 
                 value.contains('gut') || value.contains('nature') || value.contains('straightforward') || 
                 value.contains('done') || value.contains('Physical') || value.contains('Achievement') || 
                 value.contains('Dive') || value.contains('organizer') || value.contains('goals')) {
        counts['C'] = (counts['C'] ?? 0) + 1;
      } else {
        counts['D'] = (counts['D'] ?? 0) + 1;
      }
    });

    String dominant = counts.entries.reduce((a, b) => a.value > b.value ? a : b).key;

    String personality;
    String animal;
    String animalDescription;
    String emoji;

    switch (dominant) {
      case 'A':
        personality = 'The Thoughtful Introvert';
        animal = 'Owl';
        emoji = 'ü¶â';
        animalDescription = 'Like an owl, you are wise, observant, and prefer the quiet of the night. You see things others miss and value knowledge and understanding above all else.';
        break;
      case 'B':
        personality = 'The Social Butterfly';
        animal = 'Dolphin';
        emoji = 'üê¨';
        animalDescription = 'Like a dolphin, you are playful, social, and thrive in groups. You communicate easily, make friends wherever you go, and bring joy to those around you.';
        break;
      case 'C':
        personality = 'The Bold Achiever';
        animal = 'Lion';
        emoji = 'ü¶Å';
        animalDescription = 'Like a lion, you are confident, courageous, and a natural leader. You face challenges with strength and determination, and you\'re not afraid to take charge.';
        break;
      case 'D':
        personality = 'The Creative Dreamer';
        animal = 'Butterfly';
        emoji = 'ü¶ã';
        animalDescription = 'Like a butterfly, you are beautiful, transformative, and free-spirited. You bring color and creativity to the world, and you\'re always evolving into something more magnificent.';
        break;
      default:
        personality = 'The Balanced Soul';
        animal = 'Panda';
        emoji = 'üêº';
        animalDescription = 'Like a panda, you have a beautiful balance of different traits. You\'re gentle yet strong, playful yet wise, making you wonderfully unique!';
    }

    return {
      'personality': personality,
      'animal': animal,
      'animalDescription': animalDescription,
      'emoji': emoji,
    };
  }

  @override
  Widget build(BuildContext context) {
    Map<String, dynamic> result = calculatePersonality();
    String personality = result['personality'];
    String animal = result['animal'];
    String animalDescription = result['animalDescription'];
    String emoji = result['emoji'];

    Color backgroundColor = isBrutal ? Color(0xFF2D1B69) : Color(0xFF9B7FDB);
    Color buttonColor = isBrutal ? Color(0xFFFF6B6B) : Color(0xFFFFAA7F);

    return Scaffold(
      backgroundColor: backgroundColor,
      appBar: AppBar(
        backgroundColor: Colors.transparent,
        elevation: 0,
        leading: IconButton(
          icon: Icon(Icons.close, color: Colors.white, size: 28),
          onPressed: () => Navigator.pushAndRemoveUntil(
            context,
            MaterialPageRoute(builder: (context) => StartPage()),
            (route) => false,
          ),
        ),
      ),
      body: Center(
        child: Padding(
          padding: EdgeInsets.all(30),
          child: Column(
            mainAxisAlignment: MainAxisAlignment.center,
            children: [
              Spacer(),
              Text(
                'Nice Work',
                style: TextStyle(
                  fontSize: 36,
                  fontWeight: FontWeight.w900,
                  color: Colors.white,
                ),
              ),
              SizedBox(height: 30),
              // Animal emoji in circle
              Container(
                width: 140,
                height: 140,
                decoration: BoxDecoration(
                  color: Colors.white,
                  shape: BoxShape.circle,
                  boxShadow: [
                    BoxShadow(
                      color: Color(0x26000000),
                      spreadRadius: 0,
                      blurRadius: 30,
                      offset: Offset(0, 10),
                    ),
                  ],
                ),
                child: Center(
                  child: Text(
                    emoji,
                    style: TextStyle(fontSize: 80),
                  ),
                ),
              ),
              SizedBox(height: 40),
              Text(
                'You are a $animal!',
                style: TextStyle(
                  fontSize: 28,
                  fontWeight: FontWeight.w900,
                  color: Colors.white,
                  height: 1.2,
                ),
              ),
              SizedBox(height: 15),
              Container(
                padding: EdgeInsets.symmetric(horizontal: 25, vertical: 10),
                decoration: BoxDecoration(
                  color: buttonColor,
                  borderRadius: BorderRadius.circular(20),
                ),
                child: Text(
                  personality,
                  style: TextStyle(
                    fontSize: 16,
                    fontWeight: FontWeight.w600,
                    color: Colors.white,
                  ),
                ),
              ),
              SizedBox(height: 30),
              Container(
                padding: EdgeInsets.all(25),
                decoration: BoxDecoration(
                  color: Color(0x33FFFFFF),
                  borderRadius: BorderRadius.circular(20),
                ),
                child: Text(
                  animalDescription,
                  textAlign: TextAlign.center,
                  style: TextStyle(
                    fontSize: 15,
                    color: Colors.white,
                    height: 1.6,
                  ),
                ),
              ),
              Spacer(),
              // Play again button
              GestureDetector(
                onTap: () => Navigator.pushAndRemoveUntil(
                  context,
                  MaterialPageRoute(builder: (context) => StartPage()),
                  (route) => false,
                ),
                child: Container(
                  width: double.infinity,
                  padding: EdgeInsets.symmetric(vertical: 20),
                  decoration: BoxDecoration(
                    color: Colors.transparent,
                    borderRadius: BorderRadius.circular(20),
                    border: Border.all(color: Color(0x80FFFFFF), width: 2),
                  ),
                  child: Text(
                    'Play Again',
                    textAlign: TextAlign.center,
                    style: TextStyle(
                      fontSize: 18,
                      fontWeight: FontWeight.bold,
                      color: Colors.white,
                    ),
                  ),
                ),
              ),
            ],
          ),
        ),
      ),
    );
  }
}

class DetailResultPage extends StatelessWidget {
  final Map<String, dynamic> result;

  DetailResultPage({required this.result});

  @override
  Widget build(BuildContext context) {
    String personality = result['personality'];
    String animal = result['animal'];
    String animalDescription = result['animalDescription'];
    String emoji = result['emoji'];

    return Scaffold(
      backgroundColor: Color(0xFF9B7FDB),
      appBar: AppBar(
        backgroundColor: Colors.transparent,
        elevation: 0,
        leading: IconButton(
          icon: Icon(Icons.arrow_back_ios, color: Colors.white),
          onPressed: () => Navigator.pushAndRemoveUntil(
            context,
            MaterialPageRoute(builder: (context) => StartPage()),
            (route) => false,
          ),
        ),
        title: Text(
          'Your Result',
          style: TextStyle(color: Colors.white, fontSize: 18, fontWeight: FontWeight.w600),
        ),
        centerTitle: true,
      ),
      body: SingleChildScrollView(
        padding: EdgeInsets.all(30),
        child: Column(
          children: [
            Container(
              width: double.infinity,
              padding: EdgeInsets.all(35),
              decoration: BoxDecoration(
                color: Colors.white,
                borderRadius: BorderRadius.circular(30),
                boxShadow: [
                  BoxShadow(
                    color: Color(0x1A000000),
                    spreadRadius: 0,
                    blurRadius: 20,
                    offset: Offset(0, 10),
                  ),
                ],
              ),
              child: Column(
                children: [
                  Text(
                    emoji,
                    style: TextStyle(fontSize: 100),
                  ),
                  SizedBox(height: 20),
                  Text(
                    animal,
                    style: TextStyle(
                      fontSize: 32,
                      fontWeight: FontWeight.w900,
                      color: Color(0xFF2D1B69),
                    ),
                  ),
                  SizedBox(height: 10),
                  Text(
                    personality,
                    style: TextStyle(
                      fontSize: 18,
                      fontWeight: FontWeight.w600,
                      color: Color(0xFFFFAA7F),
                    ),
                  ),
                  SizedBox(height: 25),
                  Text(
                    animalDescription,
                    textAlign: TextAlign.center,
                    style: TextStyle(
                      fontSize: 16,
                      color: Color(0xFF666666),
                      height: 1.6,
                    ),
                  ),
                ],
              ),
            ),
            SizedBox(height: 30),
            GestureDetector(
              onTap: () => Navigator.pushAndRemoveUntil(
                context,
                MaterialPageRoute(builder: (context) => StartPage()),
                (route) => false,
              ),
              child: Container(
                width: double.infinity,
                padding: EdgeInsets.symmetric(vertical: 20),
                decoration: BoxDecoration(
                  color: Color(0xFFFFAA7F),
                  borderRadius: BorderRadius.circular(20),
                  boxShadow: [
                    BoxShadow(
                      color: Color(0x66FFAA7F),
                      spreadRadius: 0,
                      blurRadius: 20,
                      offset: Offset(0, 8),
                    ),
                  ],
                ),
                child: Text(
                  'Take Quiz Again',
                  textAlign: TextAlign.center,
                  style: TextStyle(
                    fontSize: 18,
                    fontWeight: FontWeight.bold,
                    color: Colors.white,
                  ),
                ),
              ),
            ),
          ],
        ),
      ),
    );
  }
}
